services:
  scylla:
    image: scylladb/scylla:latest
    command: --smp 1 --memory 750M --overprovisioned 1 --developer-mode 1 --api-address 0.0.0.0
    ports:
      - "9042:9042"
    volumes:
      - .:/demo:ro
      - scylla-data:/var/lib/scylla
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "cqlsh -e 'DESCRIBE KEYSPACES' 127.0.0.1 9042 >/dev/null 2>&1 || exit 1",
        ]
      interval: 10s
      timeout: 5s
      retries: 30
      start_period: 30s
volumes:
  scylla-data:
